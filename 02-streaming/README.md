# 02-streaming

Contains a simple example of using a language model to generate text in streaming mode.

## Libraries Involved

- `github.com/testcontainers/testcontainers-go`: [Testcontainers for Golang](https://github.com/testcontainers/testcontainers-go) is library for running Docker containers for integration tests.
- `github.com/testcontainers/testcontainers-go/modules/dockermodelrunner`: A module for running local language models using Testcontainers and the Docker Model Runner component of Docker Desktop.
- `github.com/tmc/langchaingo`: A library for interacting with language models.
- `github.com/tmc/langchaingo/llms/openai`: A specific implementation of the language model interface for OpenAI.

## Code Explanation

The code in `main.go` sets up and runs a local language model using Docker Model Runner through Testcontainers, then uses the model to generate a stream of text based on a given prompt.

### Main Functions

- `main()`: The entry point of the application. It calls the `run()` function and logs any errors.
- `run()`: The main logic of the application. It performs the following steps:
  1. Runs a local model using the [Docker Model Runner container](https://golang.testcontainers.org/modules/dockermodelrunner/). The model used is `ai/qwen3:0.6B-Q4_0`, which is available in [Docker's GenAI catalog](https://hub.docker.com/catalogs/gen-ai).
  2. Creates a new OpenAI language model instance, using the container's OpenAI-compatible endpoint.
  3. Defines the content to be generated by the language model.
  4. Generates the content and prints it to the console, using streaming mode.

## Running the Example

To run the example, navigate to the `02-streaming` directory and run the following command:

```sh
go run -v .
```

The application will start a local language model and generate text based on the provided prompt. The generated text will be displayed in the console, something like this:

```shell
<think>Okay, so I need to explain why Testcontainers for Go is great. Let me start by recalling what Testcontainers is. From what I remember, Testcontainers is a tool that allows you to create and run tests in Go, similar to how you do it in JavaScript or Python. But wait, in Go, there's a built-in package called "test" that does the same thing. So why is Testcontainers for Go better?

Hmm, maybe because Testcontainers is more flexible. Let me think. In Go, you can't create a test that's a single test file, but Testcontainers can. So maybe Testcontainers allows for more flexibility in terms of test structure. Or maybe Testcontainers is more powerful in terms of test setup. For example, Testcontainers can create a test environment that's similar to a real test, but maybe with some additional features.

Wait, in Go, the test package is used for writing tests, but Testcontainers is a tool that allows you to create test containers. So maybe Testcontainers is more powerful in terms of test setup. For example, Testcontainers can create a test environment that's similar to a real test, but maybe with some additional features. Or maybe Testcontainers is more powerful in terms of test setup. Let me think of an example. Suppose I have a test that needs to run in a specific environment. With Testcontainers, I can create a test that runs in that environment, whereas with the built-in test package, I might have to set up the environment manually.

Another point: Testcontainers allows for more flexibility in terms of test structure. For example, Testcontainers can create a test that's a single test file, but with Testcontainers, you can have multiple test files. Or maybe Testcontainers allows for more test cases to be created. Or maybe Testcontainers is more powerful in terms of test setup. Let me think of a scenario. Suppose I have a test that needs to run in a specific environment. With Testcontainers, I can create a test that runs in that environment, whereas with the built-in test package, I might have to set up the environment manually.

Wait, but in Go, the test package is used for writing tests, but Testcontainers is a tool that allows you to create test containers. So maybe Testcontainers is more powerful in terms of test setup. For example, Testcontainers can create a test that runs in a specific environment, whereas with the built-in test package, you might have to set up the environment manually.

Another point: Testcontainers allows for more flexibility in terms of test structure. For example, Testcontainers can create a test that's a single test file, but with Testcontainers, you can have multiple test files. Or maybe Testcontainers allows for more test cases to be created. Or maybe Testcontainers is more powerful in terms of test setup.

Wait, maybe Testcontainers is more powerful in terms of test setup. Let me think of an example. Suppose I have a test that needs to run in a specific environment. With Testcontainers, I can create a test that runs in that environment, whereas with the built-in test package, I might have to set up the environment manually.

Another point: Testcontainers allows for more flexibility in terms of test structure. For example, Testcontainers can create a test that's a single test file, but with Testcontainers, you can have multiple test files. Or maybe Testcontainers allows for more test cases to be created.

Wait, maybe Testcontainers is more powerful in terms of test setup. Let me think of a scenario. Suppose I have a test that needs to run in a specific environment. With Testcontainers, I can create a test that runs in that environment, whereas with the built-in test package, I might have to set up the environment manually.

Hmm, maybe Testcontainers is more powerful in terms of test setup. Let me think of a scenario. Suppose I have a test that needs to run in a specific environment. With Testcontainers, I can create a test that runs in that environment, whereas with the built-in test package, I might have to set up the environment manually.

Wait, but in Go, the test package is used for writing tests, but Testcontainers is a tool that allows you to create test containers. So maybe Testcontainers is more powerful in terms of test setup. For example, Testcontainers can create a test that runs in a specific environment, whereas with the built-in test package, you might have to set up the environment manually.

I think that's a good point. So, in summary, Testcontainers for Go is great because it allows for more flexibility in test setup, and it's more powerful in terms of test setup compared to the built-in test package. So, the answer would be that Testcontainers for Go is great because it allows for more flexibility in test setup, and it's more powerful in terms of test setup compared to the built-in test package.</think>Testcontainers for Go is a powerful tool that enhances the ability to write and run tests in Go, similar to how JavaScript or Python do it. Here's why it's great:

### 1. **Flexibility in Test Setup**
   - **Testcontainers** allows for more flexibility in test setup. For example, it can create test environments that are similar to real environments, enabling you to test in a specific configuration. This is particularly useful when dealing with dependencies or environments that are not trivial to set up manually.
   - **Built-in Test Package**: While the built-in test package is powerful, it often requires manual setup, which can be time-consuming. Testcontainers simplifies this by allowing you to create test environments directly, making it easier to test in different scenarios.

### 2. **Powerful Test Setup**
   - **Testcontainers** provides a more powerful way to set up tests. It can create test cases that are more structured and easier to manage compared to the built-in test package, which might require more manual configuration.
   - **Built-in Test Package**: While powerful, it often requires more manual setup, which can be a drawback. Testcontainers makes this process more streamlined.

### 3. **Enhanced Test Structure**
   - **Testcontainers** allows for more flexible test structures. For example, it can create test files that are more modular or easier to integrate with other components.
   - **Built-in Test Package**: While it does support modular testing, it may not offer the same level of flexibility in terms of structure and organization.

### 4. **Improved Test Automation**
   - **Testcontainers** enables better automation of test cases. It can run tests in a way that is more consistent and repeatable, which is a significant advantage over the built-in test package.
   - **Built-in Test Package**: While it supports automation, it may not offer the same level of consistency and repeatability in test automation.

### 5. **Better Integration with Go Projects**
   - **Testcontainers** is designed to integrate well with Go projects, allowing for seamless testing of code in different environments.
   - **Built-in Test Package**: While it works well, it may not offer the same level of integration or flexibility in terms of project-specific environments.

### 6. **Simplified Test Creation**
   - **Testcontainers** simplifies the creation of test files. It can be used to write tests in a way that is more straightforward and easier to manage.
   - **Built-in Test Package**: While it does support test creation, it may require more manual setup, which can be a drawback.

### Summary
Testcontainers for Go is great because it provides a more powerful and flexible way to create and run tests, allowing for better integration, automation, and structure compared to the built-in test package. Its ability to simplify test setup and improve test structure makes it a valuable tool for developers looking to enhance their testing capabilities.%
```
